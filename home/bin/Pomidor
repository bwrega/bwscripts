#!/bin/fish
set nrPomidora $argv[1]
if [ -z "$nrPomidora" ]
	echo "Użycie: Pomidor nr_pomidora" 1>&2
	exit 1
end

set sleepTick 10s

for minuta in (seq 25 -1 1)
	printf "Zostało %2d minut " $minuta
	for i in (seq 6)
		sleep $sleepTick
		if bash -c "read -t 0"
			echo Pauza!
			echo Wciśnij Enter żeby wznowić POMIDORA
			bash -c "read"
		end
		echo -n +
	end
	echo
end

echo
echo Koniec pomidora nr $nrPomidora

beep -r 2 -D 100

if [ (math "$nrPomidora"%4) = 0 ]
	echo 'Zrób sobie dłuższą przerwę!'
	beep -f 2000
end
